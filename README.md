# Article Gateway Platform

1. Gateway
–ü—Ä–æ–∫—Å–∏—Ä–æ–≤–∞–Ω–∏–µ –∫ –¥—Ä—É–≥–∏–º ms

2. Article Service
CRUD: —Å–æ–∑–¥–∞—Ç—å, –ø–æ–ª—É—á–∏—Ç—å, —É–¥–∞–ª–∏—Ç—å, –æ–±–Ω–æ–≤–∏—Ç—å —Å—Ç–∞—Ç—å–∏
–•—Ä–∞–Ω–∏—Ç –≤ PostgreSQL
–û–±—â–µ–Ω–∏–µ —á–µ—Ä–µ–∑ Kafka
–í—ã—Å—ã–ª–∞–µ—Ç —Å–æ–±—ã—Ç–∏—è (–Ω–∞–ø—Ä–∏–º–µ—Ä, "–Ω–æ–≤–∞—è —Å—Ç–∞—Ç—å—è —Å–æ–∑–¥–∞–Ω–∞") –≤ –ª–æ–≥ –∏ –ø–æ–∏—Å–∫

3. Search Service
ElasticSearch + Node.js-–æ–±—ë—Ä—Ç–∫–∞
–•—Ä–∞–Ω–∏—Ç –∏–Ω–¥–µ–∫—Å —Å—Ç–∞—Ç–µ–π (–∏–ª–∏ –∏—Ö –∑–∞–≥–æ–ª–æ–≤–∫–æ–≤, –∏–ª–∏ —Å–ª–æ–≤)
–†–µ–∞–ª–∏–∑—É–µ—Ç –ø–æ–∏—Å–∫ —Å —Ñ–∏–ª—å—Ç—Ä–∞–º–∏, —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–æ–π, –ª–∏–º–∏—Ç–∞–º–∏

4. Log Service
–ü—Ä–∏–Ω–∏–º–∞–µ—Ç —Å–æ–±—ã—Ç–∏—è –æ—Ç –¥—Ä—É–≥–∏—Ö —Å–µ—Ä–≤–∏—Å–æ–≤
–û–±—â–µ–Ω–∏–µ —á–µ—Ä–µ–∑ Kafka
–•—Ä–∞–Ω–∏—Ç –≤ PostgreSQL




## –û—Å–Ω–æ–≤–Ω—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏
üìå 1. –°–æ–∑–¥–∞–Ω–∏–µ —Å—Ç–∞—Ç—å–∏
POST /articles
Gateway -> ArticleService

- —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç —Å—Ç–∞—Ç—å—é –≤ PostgreSQL
- –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –ª–æ–≥ –≤ LogService
- –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –¥–æ–∫—É–º–µ–Ω—Ç –≤ SearchService
- SearchService –∏–Ω–¥–µ–∫—Å–∏—Ä—É–µ—Ç —Å—Ç–∞—Ç—å—é –≤ ElasticSearch

### –†–µ–∞–ª–ª–∏–∑–∞—Ü–∏—è
–í–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö
DTO
### –¢–µ—Å—Ç—ã:
–Æ–Ω–∏—Ç: —Å–µ—Ä–≤–∏—Å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è —Å—Ç–∞—Ç—å–∏
–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è: Kafka-—Ç—Ä–∏–≥–≥–µ—Ä—ã, ES-–∏–Ω–¥–µ–∫—Å–∞—Ü–∏—è, –ª–æ–≥-—Å–µ—Ä–≤–∏—Å


üìå 2. –ü–æ–ª—É—á–µ–Ω–∏–µ —Å—Ç–∞—Ç—å–∏
GET /articles/:id
Gateway ‚Üí ArticleService

- —á–∏—Ç–∞–µ—Ç –≤ –±–∞–∑–µ –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç

### –¢–µ—Å—Ç—ã
–Æ–Ω–∏—Ç: getArticleById
E2E: —á–µ—Ä–µ–∑ Gateway


üìå 3. –ü–æ–∏—Å–∫ —Å—Ç–∞—Ç–µ–π
GET /search?q=—á–∏—Å—Ç—ã–π&sort=date&limit=5
Gateway ‚Üí SearchService

- –í—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –ø–æ–∏—Å–∫ –≤ ElasticSearch
- –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ —Ç–µ–∫—Å—Ç—É, —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞, –ª–∏–º–∏—Ç (q, sort, limit, offset)

### –¢–µ—Å—Ç—ã
–Æ–Ω–∏—Ç: QueryBuilder –¥–ª—è ES
–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è: –æ—Ç–≤–µ—Ç—ã –æ—Ç Elastic –ø–æ –¥–∞–Ω–Ω—ã–º
E2E: –ø–æ –≤—Å–µ–º –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º


üìå 4. –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç—å–∏
PUT /articles/:id
Gateway ‚Üí ArticleService

- –°—Ç–∞—Ç—å—è –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –≤ PostgreSQL
- –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è —Å–æ–±—ã—Ç–∏–µ article.updated –≤ Kafka
- SearchService –æ–±–Ω–æ–≤–ª—è–µ—Ç –∏–Ω–¥–µ–∫—Å
- LogService –ø–∏—à–µ—Ç –ª–æ–≥

### –†–µ–∞–ª–ª–∏–∑–∞—Ü–∏—è
–í–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö
DTO
–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∏–Ω–¥–µ–∫—Å–∞ –≤ ES
Kafka: –ø–æ–≤—Ç–æ—Ä–Ω–∞—è –æ—Ç–ø—Ä–∞–≤–∫–∞ –∏ –∑–∞–º–µ–Ω–∞ –≤ –∏–Ω–¥–µ–∫—Å–∞—Ö

### –¢–µ—Å—Ç—ã
–Æ–Ω–∏—Ç: updateArticle
–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è: Kafka ‚Üí ES
E2E: –ø—Ä–æ–≤–µ—Ä–∫–∞, —á—Ç–æ –æ–±–Ω–æ–≤–∏–ª—Å—è –∏–Ω–¥–µ–∫—Å


üìå 5. –£–¥–∞–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç—å–∏
DELETE /articles/:id
Gateway ‚Üí ArticleService

- –£–¥–∞–ª–µ–Ω–∏–µ –∏–∑ PostgreSQL
- Kafka ‚Üí article.deleted
- SearchService —É–¥–∞–ª—è–µ—Ç –∏–∑ –∏–Ω–¥–µ–∫—Å–∞
- LogService –ø–∏—à–µ—Ç –ª–æ–≥

### –†–µ–∞–ª–ª–∏–∑–∞—Ü–∏—è
–£–¥–∞–ª–µ–Ω–∏–µ –ø–æ id
–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–æ–±—ã—Ç–∏–π —É–¥–∞–ª–µ–Ω–∏—è
ES —É–¥–∞–ª–µ–Ω–∏–µ –ø–æ documentId

### –¢–µ—Å—Ç—ã
–Æ–Ω–∏—Ç: deleteArticle
–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è: —É–¥–∞–ª–µ–Ω–∏–µ –∏–∑ ES
E2E: –ø—Ä–æ–≤–µ—Ä–∫–∞ 404 –Ω–∞ –ø–æ–≤—Ç–æ—Ä–Ω—ã–π get


üìå 6. –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤
GET /logs?service=articles&limit=10
Gateway ‚Üí LogService

- –ß—Ç–µ–Ω–∏–µ –ª–æ–≥–æ–≤ –∏–∑ PostgreSQL
- –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ª–æ–≥–æ–≤ –ø–æ —Å–µ—Ä–≤–∏—Å—É
- –ü–æ—Å—Ç—Ä–∞–Ω–∏—á–Ω–∞—è –≤—ã–±–æ—Ä–∫–∞ / –ª–∏–º–∏—Ç

### –¢–µ—Å—Ç—ã
–Æ–Ω–∏—Ç: getLogsByService
–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è: —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ + –∑–∞–ø—Ä–æ—Å
E2E: –∑–∞–ø—Ä–æ—Å –ª–æ–≥–æ–≤ –ø–æ—Å–ª–µ —Å–æ–±—ã—Ç–∏–π


### –û–±—â–∏–µ —Ç–µ—Å—Ç—ã: 
| –£—Ä–æ–≤–µ–Ω—å    | –ß—Ç–æ –ø–æ–∫—Ä—ã–≤–∞—Ç—å                                 |
| ---------- | --------------------------------------------- |
| –Æ–Ω–∏—Ç       | –°–µ—Ä–≤–∏—Å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏, —Ö–µ–ª–ø–µ—Ä—ã, –±–∏–ª–¥–µ—Ä—ã           |
| –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è | Kafka, PostgreSQL, Elastic                    |
| E2E        | –ü–æ—Ç–æ–∫–æ–≤—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏ –æ—Ç Gateway –¥–æ ES –∏ –æ–±—Ä–∞—Ç–Ω–æ |
| Mocks      | Kafka-–∫–æ–Ω—Å—å—é–º–µ—Ä—ã, producer'—ã                  |


## –§–∏–Ω–∞–ª—å–Ω—ã–π —Å—Ç–µ–∫:
| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç      | –°—Ç–µ–∫                         |
| -------------- | ---------------------------- |
| Gateway        | Node.js + Express/Fastify    |
| ArticleService | Node.js, TypeORM/Prisma + PG |
| LogService     | Node.js, Kafka, PostgreSQL   |
| SearchService  | Node.js + ElasticSearch SDK  |
| Kafka          | Confluent/Redpanda + kafkajs |
| ElasticSearch  | 8.x (docker)                 |
